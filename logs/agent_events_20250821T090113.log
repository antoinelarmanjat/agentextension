[2025-08-21 11:01:16.475] 
[2025-08-21 11:01:16.475] +-----------------------------------------------------------------------------+
[2025-08-21 11:01:16.475] | ADK Web Server started                                                      |
[2025-08-21 11:01:16.475] |                                                                             |
[2025-08-21 11:01:16.475] | For local testing, access at http://localhost:5000.                         |
[2025-08-21 11:01:16.475] +-----------------------------------------------------------------------------+
[2025-08-21 11:01:16.475] 
[2025-08-21 11:01:18.991] INFO:     127.0.0.1:58460 - "GET / HTTP/1.1" 307 Temporary Redirect
[2025-08-21 11:01:19.259] INFO:     127.0.0.1:58460 - "GET /list-apps?relative_path=./ HTTP/1.1" 200 OK
[2025-08-21 11:01:52.294] INFO:     127.0.0.1:58461 - "POST /apps/travel_concierge/users/user/sessions HTTP/1.1" 200 OK
[2025-08-21 11:01:52.320] INFO:     127.0.0.1:58461 - "GET /apps/travel_concierge/eval_sets HTTP/1.1" 200 OK
[2025-08-21 11:01:52.322] INFO:     127.0.0.1:58485 - "GET /apps/travel_concierge/eval_results HTTP/1.1" 200 OK
[2025-08-21 11:01:52.356] INFO:     127.0.0.1:58485 - "GET /apps/travel_concierge/users/user/sessions HTTP/1.1" 200 OK
[2025-08-21 11:01:52.819] INFO:     127.0.0.1:58485 - "GET /apps/travel_concierge/users/user/sessions HTTP/1.1" 200 OK
[2025-08-21 11:01:56.364] INFO:     127.0.0.1:58485 - "POST /run_sse HTTP/1.1" 200 OK
[2025-08-21 11:01:57.998] 
[2025-08-21 11:01:57.998] Loading Initial State: {'state': {'user_profile': {'passport_nationality': 'US Citizen', 'seat_preference': 'window', 'food_preference': 'vegan', 'allergies': [], 'likes': [], 'dislikes': [], 'price_sensitivity': [], 'home': {'event_type': 'home', 'address': '6420 Sequence Dr #400, San Diego, CA 92121, United States', 'local_prefer_mode': 'drive'}}, 'itinerary': {}, 'origin': '', 'destination': '', 'start_date': '', 'end_date': '', 'outbound_flight_selection': '', 'outbound_seat_number': '', 'return_flight_selection': '', 'return_seat_number': '', 'hotel_selection': '', 'room_selection': '', 'poi': '', 'itinerary_datetime': '', 'itinerary_start_date': '', 'itinerary_end_date': ''}}
[2025-08-21 11:01:57.998] 
[2025-08-21 11:01:57.998] INFO:     127.0.0.1:58485 - "GET /apps/travel_concierge/users/user/sessions/7482eb1b-5c06-46d4-9e24-e8495c11c780 HTTP/1.1" 200 OK
[2025-08-21 11:01:58.000] INFO:     127.0.0.1:58487 - "GET /debug/trace/session/7482eb1b-5c06-46d4-9e24-e8495c11c780 HTTP/1.1" 200 OK
[2025-08-21 11:02:18.310] 
[2025-08-21 11:02:18.310] +-----------------------------------------------------------------------------+
[2025-08-21 11:02:18.310] | ADK Web Server shutting down...                                             |
[2025-08-21 11:02:18.310] +-----------------------------------------------------------------------------+
[2025-08-21 11:02:18.310] 
start_date":"","end_date":"","outbound_flight_selection":"","outbound_seat_number":"","return_flight_selection":"","return_seat_number":"","hotel_selection":"","room_selection":"","poi":"","itinerary_datetime":"","itinerary_start_date":"","itinerary_end_date":""},"artifactDelta":{},"requestedAuthConfigs":{}},"id":"7245e77b-2355-4414-b178-0bb953a9b398","timestamp":1755766916.395459}
[2025-08-21 11:01:56.448][E] 2025-08-21 11:01:56,448 - INFO - google_llm.py:111 - Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
[2025-08-21 11:01:56.448][E] 2025-08-21 11:01:56,448 - DEBUG - google_llm.py:117 -
[2025-08-21 11:01:56.448][E] LLM Request:
[2025-08-21 11:01:56.448][E] -----------------------------------------------------------
[2025-08-21 11:01:56.448][E] System Instruction:
[2025-08-21 11:01:56.448][E] 
[2025-08-21 11:01:56.448][E] - You are a exclusive travel conceirge agent
[2025-08-21 11:01:56.448][E] - You help users to discover their dream vacation, planning for the vacation, book flights and hotels
[2025-08-21 11:01:56.448][E] - You want to gather a minimal information to help the user
[2025-08-21 11:01:56.448][E] - After every tool call, pretend you're showing the result to the user and keep your response limited to a phrase.
[2025-08-21 11:01:56.448][E] - Please use only the agents and tools to fulfill all user rquest
[2025-08-21 11:01:56.448][E] - If the user asks about general knowledge, vacation inspiration or things to do, transfer to the agent `inspiration_agent`
[2025-08-21 11:01:56.448][E] - If the user asks about finding flight deals, making seat selection, or lodging, transfer to the agent `planning_agent`
[2025-08-21 11:01:56.448][E] - If the user is ready to make the flight booking or process payments, transfer to the agent `booking_agent`
[2025-08-21 11:01:56.448][E] - Please use the context info below for any user preferences
[2025-08-21 11:01:56.448][E] 
[2025-08-21 11:01:56.448][E] Current user:
[2025-08-21 11:01:56.448][E] <user_profile>
[2025-08-21 11:01:56.448][E] {'passport_nationality': 'US Citizen', 'seat_preference': 'window', 'food_preference': 'vegan', 'allergies': [], 'likes': [], 'dislikes': [], 'price_sensitivity': [], 'home': {'event_type': 'home', 'address': '6420 Sequence Dr #400, San Diego, CA 92121, United States', 'local_prefer_mode': 'drive'}}
[2025-08-21 11:01:56.448][E] </user_profile>
[2025-08-21 11:01:56.448][E] 
[2025-08-21 11:01:56.448][E] Current time: 2025-08-21 11:01:56.395409
[2025-08-21 11:01:56.448][E] 
[2025-08-21 11:01:56.448][E] Trip phases:
[2025-08-21 11:01:56.448][E] If we have a non-empty itinerary, follow the following logic to deteermine a Trip phase:
[2025-08-21 11:01:56.448][E] - First focus on the start_date "" and the end_date "" of the itinerary.
[2025-08-21 11:01:56.448][E] - if "" is before the start date "" of the trip, we are in the "pre_trip" phase.
[2025-08-21 11:01:56.448][E] - if "" is between the start date "" and end date "" of the trip, we are in the "in_trip" phase.
[2025-08-21 11:01:56.448][E] - When we are in the "in_trip" phase, the "" dictates if we have "day_of" matters to handle.
[2025-08-21 11:01:56.448][E] - if "" is after the end date of the trip, we are in the "post_trip" phase.
[2025-08-21 11:01:56.448][E] 
[2025-08-21 11:01:56.448][E] <itinerary>
[2025-08-21 11:01:56.448][E] {}
[2025-08-21 11:01:56.448][E] </itinerary>
[2025-08-21 11:01:56.448][E] 
[2025-08-21 11:01:56.448][E] Upon knowing the trip phase, delegate the control of the dialog to the respective agents accordingly:
[2025-08-21 11:01:56.448][E] pre_trip, in_trip, post_trip.
[2025-08-21 11:01:56.448][E] 
[2025-08-21 11:01:56.448][E] 
[2025-08-21 11:01:56.448][E] You are an agent. Your internal name is "root_agent".
[2025-08-21 11:01:56.448][E] 
[2025-08-21 11:01:56.448][E] The description about you is "A Travel Conceirge using the services of multiple sub-agents"
[2025-08-21 11:01:56.448][E] 
[2025-08-21 11:01:56.448][E] 
[2025-08-21 11:01:56.448][E] You have a list of other agents to transfer to:
[2025-08-21 11:01:56.448][E] 
[2025-08-21 11:01:56.448][E] 
[2025-08-21 11:01:56.448][E] Agent name: inspiration_agent
[2025-08-21 11:01:56.448][E] Agent description: A travel inspiration agent who inspire users, and discover their next vacations; Provide information about places, activities, interests,
[2025-08-21 11:01:56.448][E] 
[2025-08-21 11:01:56.448][E] 
[2025-08-21 11:01:56.448][E] Agent name: planning_agent
[2025-08-21 11:01:56.448][E] Agent description: Helps users with travel planning, complete a full itinerary for their vacation, finding best deals for flights and hotels.
[2025-08-21 11:01:56.448][E] 
[2025-08-21 11:01:56.448][E] 
[2025-08-21 11:01:56.448][E] Agent name: booking_agent
[2025-08-21 11:01:56.448][E] Agent description: Given an itinerary, complete the bookings of items by handling payment choices and processing.
[2025-08-21 11:01:56.448][E] 
[2025-08-21 11:01:56.448][E] 
[2025-08-21 11:01:56.448][E] Agent name: pre_trip_agent
[2025-08-21 11:01:56.448][E] Agent description: Given an itinerary, this agent keeps up to date and provides relevant travel information to the user before the trip.
[2025-08-21 11:01:56.448][E] 
[2025-08-21 11:01:56.448][E] 
[2025-08-21 11:01:56.448][E] Agent name: in_trip_agent
[2025-08-21 11:01:56.448][E] Agent description: Provide information about what the users need as part of the tour.
[2025-08-21 11:01:56.448][E] 
[2025-08-21 11:01:56.448][E] 
[2025-08-21 11:01:56.448][E] Agent name: post_trip_agent
[2025-08-21 11:01:56.448][E] Agent description: A follow up agent to learn from user's experience; In turn improves the user's future trips planning and in-trip experience.
[2025-08-21 11:01:56.448][E] 
[2025-08-21 11:01:56.448][E] 
[2025-08-21 11:01:56.448][E] If you are the best to answer the question according to your description, you
[2025-08-21 11:01:56.448][E] can answer it.
[2025-08-21 11:01:56.448][E] 
[2025-08-21 11:01:56.448][E] If another agent is better for answering the question according to its
[2025-08-21 11:01:56.448][E] description, call `transfer_to_agent` function to transfer the
[2025-08-21 11:01:56.448][E] question to that agent. When transferring, do not generate any text other than
[2025-08-21 11:01:56.448][E] the function call.
[2025-08-21 11:01:56.448][E] 
[2025-08-21 11:01:56.448][E] -----------------------------------------------------------
[2025-08-21 11:01:56.448][E] Contents:
[2025-08-21 11:01:56.448][E] {"parts":[{"text":"hello"}],"role":"user"}
[2025-08-21 11:01:56.448][E] -----------------------------------------------------------
[2025-08-21 11:01:56.448][E] Functions:
[2025-08-21 11:01:56.448][E] transfer_to_agent: {'agent_name': {'type': <Type.STRING: 'STRING'>}}
[2025-08-21 11:01:56.448][E] -----------------------------------------------------------
[2025-08-21 11:01:56.448][E] 
[2025-08-21 11:01:56.448][E] 2025-08-21 11:01:56,448 - INFO - models.py:7422 - AFC is enabled with max remote calls: 10.
[2025-08-21 11:01:56.449][E] 2025-08-21 11:01:56,449 - DEBUG - _trace.py:87 - connect_tcp.started host='generativelanguage.googleapis.com' port=443 local_address=None timeout=None socket_options=None
[2025-08-21 11:01:56.484][E] 2025-08-21 11:01:56,484 - DEBUG - _trace.py:87 - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x12dcf04d0>
[2025-08-21 11:01:56.484][E] 2025-08-21 11:01:56,484 - DEBUG - _trace.py:87 - start_tls.started ssl_context=<ssl.SSLContext object at 0x12dea2850> server_hostname='generativelanguage.googleapis.com' timeout=None
[2025-08-21 11:01:56.505][E] 2025-08-21 11:01:56,505 - DEBUG - _trace.py:87 - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x12de261b0>
[2025-08-21 11:01:56.505][E] 2025-08-21 11:01:56,505 - DEBUG - _trace.py:87 - send_request_headers.started request=<Request [b'POST']>
[2025-08-21 11:01:56.505][E] 2025-08-21 11:01:56,505 - DEBUG - _trace.py:87 - send_request_headers.complete
[2025-08-21 11:01:56.505][E] 2025-08-21 11:01:56,505 - DEBUG - _trace.py:87 - send_request_body.started request=<Request [b'POST']>
[2025-08-21 11:01:56.505][E] 2025-08-21 11:01:56,505 - DEBUG - _trace.py:87 - send_request_body.complete
[2025-08-21 11:01:56.505][E] 2025-08-21 11:01:56,505 - DEBUG - _trace.py:87 - receive_response_headers.started request=<Request [b'POST']>
[2025-08-21 11:01:57.977][E] 2025-08-21 11:01:57,977 - DEBUG - _trace.py:87 - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json; charset=UTF-8'), (b'Vary', b'Origin'), (b'Vary', b'X-Origin'), (b'Vary', b'Referer'), (b'Content-Encoding', b'gzip'), (b'Date', b'Thu, 21 Aug 2025 09:01:58 GMT'), (b'Server', b'scaffolding on HTTPServer2'), (b'X-XSS-Protection', b'0'), (b'X-Frame-Options', b'SAMEORIGIN'), (b'X-Content-Type-Options', b'nosniff'), (b'Server-Timing', b'gfet4t7; dur=1454'), (b'Alt-Svc', b'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000'), (b'Transfer-Encoding', b'chunked')])
[2025-08-21 11:01:57.978][E] 2025-08-21 11:01:57,978 - INFO - _client.py:1740 - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent "HTTP/1.1 200 OK"
[2025-08-21 11:01:57.978][E] 2025-08-21 11:01:57,978 - DEBUG - _trace.py:87 - receive_response_body.started request=<Request [b'POST']>
[2025-08-21 11:01:57.979][E] 2025-08-21 11:01:57,978 - DEBUG - _trace.py:87 - receive_response_body.complete
[2025-08-21 11:01:57.979][E] 2025-08-21 11:01:57,979 - DEBUG - _trace.py:87 - response_closed.started
[2025-08-21 11:01:57.979][E] 2025-08-21 11:01:57,979 - DEBUG - _trace.py:87 - response_closed.complete
[2025-08-21 11:01:57.980][E] 2025-08-21 11:01:57,980 - INFO - google_llm.py:203 - Response received from the model.
[2025-08-21 11:01:57.981][E] 2025-08-21 11:01:57,980 - WARNING - types.py:5176 - Warning: there are non-text parts in the response: ['thought_signature'], returning concatenated text result from text parts. Check the full candidates.content.parts accessor to get the full model response.
[2025-08-21 11:01:57.981][E] 2025-08-21 11:01:57,981 - DEBUG - google_llm.py:204 -
[2025-08-21 11:01:57.981][E] LLM Response:
[2025-08-21 11:01:57.981][E] -----------------------------------------------------------
[2025-08-21 11:01:57.981][E] Text:
[2025-08-21 11:01:57.981][E] Hello! I'm your exclusive travel concierge. How can I assist you today with your dream vacation?
[2025-08-21 11:01:57.981][E] -----------------------------------------------------------
[2025-08-21 11:01:57.981][E] Function calls:
[2025-08-21 11:01:57.981][E] 
[2025-08-21 11:01:57.981][E] -----------------------------------------------------------
[2025-08-21 11:01:57.981][E] Raw response:
[2025-08-21 11:01:57.981][E] {"sdk_http_response":{"headers":{"content-type":"application/json; charset=UTF-8","vary":"Origin, X-Origin, Referer","content-encoding":"gzip","date":"Thu, 21 Aug 2025 09:01:58 GMT","server":"scaffolding on HTTPServer2","x-xss-protection":"0","x-frame-options":"SAMEORIGIN","x-content-type-options":"nosniff","server-timing":"gfet4t7; dur=1454","alt-svc":"h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000","transfer-encoding":"chunked"}},"candidates":[{"content":{"parts":[{"thought_signature":"CqgFAVSoXO6NORHkFqQjgfhjcuOdTS_j5gW4Y6LcgdmRXKmROV9vKgzqvEQU90Yw1_p9x9KmPkad22TRP0OVm4-ytRj_q4scpiB0yIB9EXdBpFSPJgE6-xD6T4ZDGjIfb6So44WLWJAoAzcbuAKYvt9_g3yC6qlkHOERBIGHXuCyVuLsLF_gAllWS-sw8eCWapuuaw9Z83ZRbxPi988wwoU1LLu2c2f1NuI5C1IsBGeNW_DHKWD-N7zwsy4J5N1ICXZfmc72no6j6KBIV1hipv8OC9W3ms5lX9e4p4jV_Kwio6ILeq3T_EyMywf6qswNLWzO_sg-7m_sslq2p1QGO1-jZJn623N-utloqZw9rdQion1zbRvkVmhPjHkQGt7ppGNSQNI6d5ygf0ePgKJgNmX_XBpLqdDEiA2if2fafD6EY0kHvnX3i0PBMTew6zqWV6TnlOZvveUa3Ucw6uPpORq9zIuQ15hRD5bj5gS79oWbg9VBRRz8wE7GhSrEuSRxB5XMO03dn4ruau6N3_8bB5JtVAp83yzmo6Id8FP9XxKVvtGPv89p6Mc231-9QA_C8w7FIm_jqOy-Ast2DcfzrDKHpZsNsbfSlXtO6yWDcyrN28egQyvVFBKBYhh49248TlBktRJy2CxW9wiS7eNiPLdZRNgxel1qliHjbB7BQ0yFHfySJWzOUmUGcBdRCB2CtlJGV6tsx4QSk0rzNCDZqKbByeltj5BzQKzV40DlMUVddEzxEOn44hKzlDe-NCf0Sgj3tZvJNIf7EdvNSXaWF19Sy2Kl-UpN_QEXMWwYgPV_oUgA2aIFOiYkWo578KgrSSnrgPMWpsob7-pVIpEHk1jb4Gb123PzJdcIUcYNsJfRUVMm-C_422SvfCT8NlcIstUW5G5X7Y30CI4=","text":"Hello! I'm your exclusive travel concierge. How can I assist you today with your dream vacation?"}],"role":"model"},"finish_reason":"STOP","index":0}],"model_version":"gemini-2.5-flash","usage_metadata":{"candidates_token_count":21,"prompt_token_count":939,"prompt_tokens_details":[{"modality":"TEXT","token_count":939}],"thoughts_token_count":138,"total_token_count":1098},"automatic_function_calling_history":[]}
[2025-08-21 11:01:57.981][E] -----------------------------------------------------------
[2025-08-21 11:01:57.981][E] 
[2025-08-21 11:01:57.982][E] 2025-08-21 11:01:57,982 - DEBUG - adk_web_server.py:852 - Generated event in agent run streaming: {"content":{"parts":[{"thoughtSignature":"CqgFAVSoXO6NORHkFqQjgfhjcuOdTS_j5gW4Y6LcgdmRXKmROV9vKgzqvEQU90Yw1_p9x9KmPkad22TRP0OVm4-ytRj_q4scpiB0yIB9EXdBpFSPJgE6-xD6T4ZDGjIfb6So44WLWJAoAzcbuAKYvt9_g3yC6qlkHOERBIGHXuCyVuLsLF_gAllWS-sw8eCWapuuaw9Z83ZRbxPi988wwoU1LLu2c2f1NuI5C1IsBGeNW_DHKWD-N7zwsy4J5N1ICXZfmc72no6j6KBIV1hipv8OC9W3ms5lX9e4p4jV_Kwio6ILeq3T_EyMywf6qswNLWzO_sg-7m_sslq2p1QGO1-jZJn623N-utloqZw9rdQion1zbRvkVmhPjHkQGt7ppGNSQNI6d5ygf0ePgKJgNmX_XBpLqdDEiA2if2fafD6EY0kHvnX3i0PBMTew6zqWV6TnlOZvveUa3Ucw6uPpORq9zIuQ15hRD5bj5gS79oWbg9VBRRz8wE7GhSrEuSRxB5XMO03dn4ruau6N3_8bB5JtVAp83yzmo6Id8FP9XxKVvtGPv89p6Mc231-9QA_C8w7FIm_jqOy-Ast2DcfzrDKHpZsNsbfSlXtO6yWDcyrN28egQyvVFBKBYhh49248TlBktRJy2CxW9wiS7eNiPLdZRNgxel1qliHjbB7BQ0yFHfySJWzOUmUGcBdRCB2CtlJGV6tsx4QSk0rzNCDZqKbByeltj5BzQKzV40DlMUVddEzxEOn44hKzlDe-NCf0Sgj3tZvJNIf7EdvNSXaWF19Sy2Kl-UpN_QEXMWwYgPV_oUgA2aIFOiYkWo578KgrSSnrgPMWpsob7-pVIpEHk1jb4Gb123PzJdcIUcYNsJfRUVMm-C_422SvfCT8NlcIstUW5G5X7Y30CI4=","text":"Hello! I'm your exclusive travel concierge. How can I assist you today with your dream vacation?"}],"role":"model"},"usageMetadata":{"candidatesTokenCount":21,"promptTokenCount":939,"promptTokensDetails":[{"modality":"TEXT","tokenCount":939}],"thoughtsTokenCount":138,"totalTokenCount":1098},"invocationId":"e-c826b34a-96b4-430e-9f64-ea3bc35ae946","author":"root_agent","actions":{"stateDelta":{},"artifactDelta":{},"requestedAuthConfigs":{}},"id":"19d42ae7-aa64-4c98-82a0-983945dc8337","timestamp":1755766916.396303}
[2025-08-21 11:01:57.986][E] 2025-08-21 11:01:57,986 - DEBUG - _trace.py:87 - close.started
[2025-08-21 11:01:57.987][E] 2025-08-21 11:01:57,986 - DEBUG - _trace.py:87 - close.complete
[2025-08-21 11:02:18.208][E] INFO:     Shutting down
[2025-08-21 11:02:18.310][E] INFO:     Waiting for application shutdown.
[2025-08-21 11:02:18.311][E] INFO:     Application shutdown complete.
[2025-08-21 11:02:18.311][E] INFO:     Finished server process [52816]
[2025-08-21 11:02:18.313][E] 
[2025-08-21 11:02:18.313][E] Aborted!
